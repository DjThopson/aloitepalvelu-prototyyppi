(function(){var a,b,c,d,e;jQuery.fn.render=function(d,f,g){var h,i,j,k,l,m,n,o;i=this,jQuery.isArray(d)||(d=[d]),f||(f={});for(l=0,n=i.length;l<n;l++){h=i[l],h=jQuery(h),h.data("template")||h.data("template",h.clone()),h.empty();for(m=0,o=d.length;m<o;m++)j=d[m],j&&(j.parent_=g),k=h.data("template").clone(),k.data("key",h.data("key")),e(k,j),c(k,j),b(k,j,f),a(k,j,f),h.append(k.html())}return i},e=function(a,b){var c,e,f,g;g=[];for(c in b)f=b[c],typeof f=="string"&&(a.hasClass(c||a.is(c))&&d(a,f),g.push(function(){var b,g,h,i;h=a.find(""+c+", ."+c),i=[];for(b=0,g=h.length;b<g;b++)e=h[b],i.push(d(jQuery(e),f));return i}()));return g},c=function(a,b){var c,e,f,g,h,i;g=a.data("key");if(!g)return;i=[];for(e in b)h=b[e],typeof h=="string"&&(c=""+g+"\\["+e+"\\]",a.is("input")&&a.attr("name")===c&&a.attr("type")==="text"&&d(a,h,"value"),i.push(function(){var b,e,g,i;g=a.find("input[name="+c+"]"),i=[];for(b=0,e=g.length;b<e;b++)f=g[b],i.push(d(jQuery(f),h,"value"));return i}()));return i},b=function(a,b,c){var e,f,g,h,i,j;j=[];for(g in c)f=c[g],typeof f=="function"&&(i=g.split("@"),g=i[0],e=i[1],a.hasClass(g||a.is(g))&&d(a,f.call(b,a),e),j.push(function(){var c,i,j,k;j=a.find(""+g+", ."+g),k=[];for(c=0,i=j.length;c<i;c++)h=j[c],h=jQuery(h),k.push(d(h,f.call(b,h),e));return k}()));return j},a=function(a,b,c){var d,e,f;f=[];for(d in b)e=b[d],typeof e=="object"&&d!=="parent_"&&(a.data("key",d),a.hasClass(d)&&a.render(e,c[d],b),a.find("."+d).data("key",d),f.push(a.find("."+d).render(e,c[d],b)));return f},d=function(a,b,c){var d;return c?a.attr(c,b):(d=a.children().detach(),a.text(b),a.append(d))}}).call(this)